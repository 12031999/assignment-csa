<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Image Details</title>
    <style>
      body {
        font-family: Arial, sans-serif;
      }
      table {
        border-collapse: collapse;
        margin: 20px 0;
        width: 100%;
      }
      table, th, td {
        border: 1px solid black;
      }
      th, td {
        padding: 10px;
        text-align: left;
      }
      th {
        background-color: #ddd;
      }
      img {
        max-width: 50px;
        max-height: 50px;
      }
      .button {
        background-color: #4CAF50;
        border: none;
        color: white;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
      }
      .button-danger {
        background-color: #f44336;
      }
    </style>
  </head>
  <body>
    <h1>Image Details</h1>
    <table id="image-table">
      <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Tags</th>
        <th>Image</th>
        <th>Action</th>
      </tr>
    </table>
    <button id="new-image-button" class="button">New Image</button>
    <script>
        function addImageToTable(title, description, tags, imageData) {
          console.log('Adding image to table:', title, description, tags, imageData);
          const table = document.getElementById('image-table');
          const row = table.insertRow(-1);
          const titleCell = row.insertCell(0);
          const descriptionCell = row.insertCell(1);
          const tagsCell = row.insertCell(2);
          const imageCell = row.insertCell(3);
          const actionCell = row.insertCell(4);
      
          titleCell.textContent = title;
          descriptionCell.textContent = description;
          tagsCell.textContent = tags;
          const img = document.createElement('img');
          img.src = imageData;
          imageCell.appendChild(img);
      
          const updateButton = document.createElement('button');
          updateButton.className = 'button';
          updateButton.textContent = 'Update';
          updateButton.addEventListener('click', () => {
            const url = `update.html?title=${encodeURIComponent(title)}&description=${encodeURIComponent(description)}&tags=${encodeURIComponent(tags)}&image=${encodeURIComponent(imageData)}`;
            window.location.href = url;
          });
          actionCell.appendChild(updateButton);
      
          const deleteButton = document.createElement('button');
          deleteButton.className = 'button button-danger';
          deleteButton.textContent = 'Delete';
          deleteButton.addEventListener('click', () => {
            row.remove();
          });
          actionCell.appendChild(deleteButton);
        }
      
        const newImageButton = document.getElementById('new-image-button');
        newImageButton.addEventListener('click', () => {
          window.location.href = 'UI_Media_Sharing.html';
        });
      
        const urlParams = new URLSearchParams(window.location.search);
        const title = urlParams.get('title');
        const description = urlParams.get('description');
        const tags = urlParams.get('tags');
        const imageData = urlParams.get('image');
        if (title && description && tags && imageData) {
          addImageToTable(title, description, tags, imageData);
        }
      </script>
  </body>  
</html>